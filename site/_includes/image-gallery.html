<ul class="image-gallery">
  {% for file in site.static_files %}{% if file.path contains include.folder
  %}{% if file.extname == '.jpg' or file.extname == '.jpeg' or file.extname ==
  '.JPG' or file.extname == '.JPEG' or file.extname == '.png' or file.extname ==
  '.PNG' %}{% assign filenameparts = file.path | split: "/" %} {% assign
  filename = filenameparts | last | replace: file.extname,"" %}
  <li>
    <a href="{{ file.path | relative_url }}" title="{{ filename }}">
      {%- if jekyll.environment == 'production' -%}
      <img
        src="http://images.weserv.nl/?url={{ site.url }}{{ file.path | relative_url }}"
        alt="{{ filename }}"
        title="{{ filename }}"
      />
      {%- else -%}
      <img
        src="{{ file.path | relative_url }}"
        alt="{{ filename }}"
        title="{{ filename }}"
      />
      {%- endif -%}
      <span>{{ filename }}</span>
    </a>
  </li>
  {% endif %}{% endif %}{% endfor %}
</ul>

<style>
  .image-gallery {
    overflow: auto;
    margin-left: -1% !important;
  }
  .image-gallery li {
    float: left;
    display: block;
    margin: 0 0 1% 1%;
    width: 19%;
  }
  .image-gallery li a {
    text-align: center;
    text-decoration: none !important;
    color: rgb(from canvastext r g b / 38%);
  }
  .image-gallery li a span {
    display: block;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    padding: 3px 0;
  }
  .image-gallery li a img {
    width: 100%;
    display: block;
    border-radius: 0.5rem;
  }
</style>
